{"version":3,"sources":["physik.coffee"],"names":[],"mappings":"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","file":"physik.js","sourceRoot":"/source/","sourcesContent":["# Calculcation of errors\n# @author Luca Keidel <info@lucakeidel.de>\n\n# Returns the number of digits after the comma\n#\n# @param [Float] num the number\n#\ndecimalPlaces = (num) ->\n  match = (''+num).match(/(?:\\.(\\d+))?(?:[eE]([+-]?\\d+))?$/)\n  return 0 if not match\n  Math.max(0, (if match[1] then match[1].length else 0) - (if match[2] then +match[2] else 0))\n\n# Math.log10\nlog10 = Math.log10 or (x) ->\n  Math.log(x) / Math.LN10\n\n# Get the significant digits of a float.\n# Contrary to @code{toPrecision} this function ceils the result\n# Based on http://stackoverflow.com/a/1581007\n#\n# @param [Float] num the number\n# @param [Integer] n amount of significant digits desired\n#\nsignificantDigitsCeiling = (num, n) ->\n\n  if num is 0 then return 0\n \n  d = Math.ceil(log10(if num < 0 then -num else num))\n  power = n - Math.floor(d)\n\n  magnitude = Math.pow(10, power)\n  shifted = Math.ceil(num * magnitude)\n  shifted / magnitude\n\n\n# Represents an error interval\nclass ErrorInterval\n\n  # Constructs a new error interval (a +/- Delta a)\n  #\n  # @param [Float] median of the interval (a)\n  # @param [Float] radius of the interval (Delta a)\n  #\n  constructor: (median, radius) ->\n    @median = parseFloat(median)\n    @radius = parseFloat(radius)\n\n\n  # returns the relative Error\n  # @return [Float] relative error\n  #\n  relativeError: -> \n    parseFloat (@radius / @median).toPrecision(2)\n\n  # Adds another interval\n  #\n  # @param [ErrorInterval] o the other interval\n  # @return [ErrorInterval] result\n  add: (o) ->\n    a = @median + o.median\n    da = @radius + o.radius\n    new ErrorInterval(a, da).intermediateResult()\n\n  # Subtracts another interval\n  #\n  # @param [ErrorInterval] o the other interval\n  # @return [ErrorInterval] result\n  sub: (o) ->\n    a = @median - o.median\n    da = @radius + o.radius\n    new ErrorInterval(a, da).intermediateResult()\n\n  # Multiplies with another interval\n  #\n  # @param [ErrorInterval] o the other interval\n  # @return [ErrorInterval] result\n  mult: (o) ->\n    a = @median * o.median\n    rel = (@.relativeError() + o.relativeError()).toPrecision(2)\n    da = (rel * a).toPrecision(2)\n\n    new ErrorInterval(a, da).intermediateResult()\n\n  # Divides by another interval\n  #\n  # @param [ErrorInterval] o the other interval\n  # @return [ErrorInterval] result\n  div: (o) ->\n    a = @median / o.median\n    rel = (@.relativeError() + o.relativeError()).toPrecision(2)\n    da = (rel * a).toPrecision(2)\n\n    new ErrorInterval(a, da).intermediateResult()\n\n  # Calculates the power\n  #\n  # @param [Float] exp the exponent\n  # @return [ErrorInterval] result\n  pow: (exp) ->\n    a = Math.pow(@median, exp)\n    rel = (@.relativeError() * Math.abs(exp)).toPrecision(2)\n    da = (rel * a).toPrecision(2)\n\n    new ErrorInterval(a, da).intermediateResult()\n\n  # Multiplies the interval with a scalar\n  #\n  # @param [Number] c the scalar\n  # @return [ErrorInterval] result\n  scalar: (c) ->\n    (@mult new ErrorInterval(c,0)).intermediateResult()\n\n  # Applys a function @code{f} to the interval.\n  # The function has to accept one parameter and\n  # has to return a numerical value.\n  #\n  # @param [Function] f the function\n  # @return [ErrorInterval] result\n  apply: (f) ->\n    k = f(@median)\n    dk = Math.abs(f((@median + @radius)) - k)\n    new ErrorInterval(k, dk).intermediateResult()\n\n  # Create an error interval based on this interval\n  # with the precision of end results.\n  #\n  # @return [ErrorInterval] result\n  endResult: ->\n    resRadius = significantDigitsCeiling(@radius, 1)\n    resMedian = @median.toFixed  (decimalPlaces resRadius)\n\n    new ErrorInterval(resMedian, resRadius)\n\n  # Create an error interval based on this interval\n  # with the precision of intermediate results.\n  #\n  # @return [ErrorInterval] result\n  intermediateResult: ->\n    resRadius = @radius.toPrecision(2)\n    resMedian = @median.toFixed  (decimalPlaces resRadius)\n  \n    new ErrorInterval(resMedian, resRadius)    \n\n  # @return [String]\n  toString: ->\n    @.getMedian()+' '+@.getRadius()\n\n  # Returns the median with the same number of digits after the comma \n  # as the radius\n  #\n  # @return [String]\n  getMedian: ->\n    @median.toFixed(decimalPlaces(@.getRadius()))\n\n  # Returns the radius\n  #\n  # @return [String]\n  getRadius: ->\n    (''+@radius.toPrecision(2))\n\n\n# Creates an error interval based on an\n# analog measurement\n#\n# @param [ErrorInterval] val the datum\n# @param [Float] k the quality\n# @param [Float] range range\n# \n# @return [ErrorInterval] result\ncreateFromAnalogMeasurement = (val, k, range) ->\n  dk = (k / 100) * range\n  da = val.radius\n  new ErrorInterval(val.median, (dk+da)).intermediateResult()\n\n# Creates an error interval based on an\n# digital measurement\n#\n# @param [ErrorInterval] val the datum\n# @param [Float] p \n# @param [Integer] d\n# \n# @return [ErrorInterval] result\ncreateFromDigitalMeasurement = (val, p, d) ->\n  da = ((p / 100) * val.median)\n  da += d * Math.pow(10, -decimalPlaces val.median)  \n  new ErrorInterval(val.median, da).intermediateResult()\n\n# Sinus function which can be used in \n# the ErrorInterval.apply() function\n#\n# @param [Float] v Value\n# \n# @return [Float] result\nsin = (v) ->\n  Math.sin(v * (Math.PI / 180))\n\n# Cosinus function which can be used in \n# the ErrorInterval.apply() function\n#\n# @param [Float] v Value\n# \n# @return [Float] result\ncos = (v) ->\n  Math.cos(v * (Math.PI / 180))\n\n# Tangens function which can be used in \n# the ErrorInterval.apply() function\n#\n# @param [Float] v Value\n# \n# @return [Float] result\ntan = (v) ->\n  Math.tan(v * (Math.PI / 180))\n\nmodule.exports = {ErrorInterval, sin, cos, tan, createFromAnalogMeasurement, createFromDigitalMeasurement}"]}